#!/bin/bash
# Pre-commit hook: Run QA tests before allowing commit

echo "ğŸ§ª Running pre-commit QA tests..."

# Check if Hugo is installed
if ! command -v hugo &> /dev/null; then
    echo "âš ï¸  Hugo not installed, skipping local tests"
    exit 0
fi

# Run build test
echo "ğŸ“¦ Testing build..."
if ! hugo --minify --quiet 2>/dev/null; then
    echo "âŒ Build failed! Fix errors before committing."
    exit 1
fi

echo "âœ… Build OK"

# Optional: Run full QA if script exists
if [ -f "scripts/qa-test.sh" ]; then
    echo "ğŸ”— Running full QA suite..."
    if ! ./scripts/qa-test.sh; then
        echo "âŒ QA tests failed! Fix before committing."
        exit 1
    fi
fi

echo "âœ… Pre-commit checks passed!"
exit 0
